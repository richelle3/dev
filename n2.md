–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º—Å—è:

---

## üîÅ –ú–æ–∂–Ω–æ –ª–∏ **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ `&mut`**?

**–ù–µ—Ç, –Ω–µ–ª—å–∑—è.**
Rust **–Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö `&mut`-—Å—Å—ã–ª–æ–∫ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –±—ã –∫ **–≥–æ–Ω–∫–µ –¥–∞–Ω–Ω—ã—Ö (data race)**. –ü–æ—ç—Ç–æ–º—É:

### ‚ùó –í –æ–¥–∏–Ω –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å:

* –ª–∏–±–æ **–æ–¥–Ω–∞ `&mut` —Å—Å—ã–ª–∫–∞** (—Å –ø—Ä–∞–≤–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è),
* –ª–∏–±–æ **–ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ `&` —Å—Å—ã–ª–æ–∫** (—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è),
* **–Ω–æ –Ω–µ –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**.

---

## üîí –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç Rust?

–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä **–≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç**, —á—Ç–æ:

* –ø–æ–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∞–∫—Ç–∏–≤–Ω–∞—è `&mut` —Å—Å—ã–ª–∫–∞,
  –Ω–∏–∫—Ç–æ –¥—Ä—É–≥–æ–π –Ω–µ –º–æ–∂–µ—Ç –Ω–∏ —á–∏—Ç–∞—Ç—å (`&`), –Ω–∏ –º—É—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ;
* –∫–∞–∫ —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è `&mut`, –≤—Å–µ –¥—Ä—É–≥–∏–µ —Å—Å—ã–ª–∫–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è **–Ω–µ–≤–∞–ª–∏–¥–Ω—ã** (–≤ —Ä–∞–º–∫–∞—Ö borrow-checker'–∞).

---

### üîß –ü—Ä–∏–º–µ—Ä:

```rust
fn main() {
    let mut s = String::from("hello");

    let r1 = &mut s;
    let r2 = &mut s; // ‚ùå –æ—à–∏–±–∫–∞: –≤—Ç–æ—Ä–∞—è `&mut` –≤–æ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –ø–µ—Ä–≤–æ–π

    println!("{}, {}", r1, r2);
}
```

üõ° **–û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**: "cannot borrow `s` as mutable more than once at a time"

---

## ‚úÖ –ê –≤–æ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:

```rust
fn main() {
    let mut s = String::from("hello");

    {
        let r1 = &mut s;
        r1.push_str(" world"); // –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏ –æ—Ç–ø—É—Å–∫–∞–µ–º r1
    }

    let r2 = &mut s; // —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–Ω–æ–≤–∞
    r2.push_str("!");
    println!("{}", r2);
}
```

üìå –ó–¥–µ—Å—å `r1` –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ —Å–æ–∑–¥–∞—ë—Ç—Å—è `r2`, –∏ —ç—Ç–æ **–±–µ–∑–æ–ø–∞—Å–Ω–æ**.

---

## üß† –í—ã–≤–æ–¥:

> `&mut` –¥–∞—ë—Ç **–∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø** –∫ –¥–∞–Ω–Ω—ã–º ‚Äî —Ç—ã –ª–∏–±–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π, –∫—Ç–æ –º–æ–∂–µ—Ç –∏—Ö –º–µ–Ω—è—Ç—å, –ª–∏–±–æ –Ω–∏–∫—Ç–æ –Ω–µ –º–æ–∂–µ—Ç –∏—Ö –º–µ–Ω—è—Ç—å –≤–æ–æ–±—â–µ.

–≠—Ç–æ –æ–¥–Ω–æ –∏–∑ —Å–∞–º—ã—Ö –º–æ—â–Ω—ã—Ö –∏ —Å—Ç—Ä–æ–≥–∏—Ö –ø—Ä–∞–≤–∏–ª –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Rust ‚Äî –∏ –∏–º–µ–Ω–Ω–æ –æ–Ω–æ –¥–µ–ª–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–º **–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**.

–•–æ—á–µ—à—å –ø—Ä–∏–º–µ—Ä –Ω–∞ `&` –∏ `&mut` —Å —á—Ç–µ–Ω–∏–µ–º –∏ –∑–∞–ø–∏—Å—å—é –≤ –æ–¥–Ω–æ–º –±–ª–æ–∫–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ Rust —ç—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç?

